webpackJsonp([5],{50:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{item:{required:!0}}}},52:function(t,e,n){var i=n(46)(n(50),n(53),null,null);t.exports=i.exports},53:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("span",[t._v(t._s(t.item.name))]),t._v(" "),n("abbr",[t._v(t._s(t.item.surname))])])},staticRenderFns:[]}},57:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(10),o=n.n(i),a=n(52),r=n.n(a),s=n(48),c=n.n(s),l=n(47),u=n.n(l),d=function(){function t(t,e){var n=[],i=!0,o=!1,a=void 0;try{for(var r,s=t[Symbol.iterator]();!(i=(r=s.next()).done)&&(n.push(r.value),!e||n.length!==e);i=!0);}catch(t){o=!0,a=t}finally{try{!i&&s.return&&s.return()}finally{if(o)throw a}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();e.default={data:function(){return{template:r.a,clientNotFound:!1,isEditing:!1,subtotal:0,iva:0,item:"",total_cost:0,items:[],products:[],items_invoice:[{product:"",amount:0}],quote:{value:""}}},filters:{currency:function(t){if(t)return c.a.formatMoney(t,{symbol:"$",format:"%v %s",thousand:".",decimal:","})}},computed:{subtotal_products:function(){var t=[];return Object.entries(this.items_invoice).forEach(function(e){var n=d(e,2),i=(n[0],n[1]);i.product&&t.push(Number(i.product.cost)*i.amount)}),this.subtotal=t.reduce(function(t,e){return t+e},0),this.subtotal},iva_products:function(){return this.iva=.19*this.subtotal,this.iva},total_products:function(){return this.total_cost=this.subtotal+this.iva,this.total_cost}},methods:{open:function(){this.dialog1.open()},onSubmit:function(){var t=this,e={client:this.item.id,items_invoice:this.items_invoice};o.a.post("/quotes",e).then(function(){t.$refs.dialog1.close(),t.$emit("done"),t.reset(),u()("Operaci贸n exitosa","Cotizaci贸n creada correctamente","success")}).catch(function(){u()("Error!","Hubo un problema al crear la cotizaci贸n","error")})},reset:function(){for(var t=0;t<this.$refs.autocomplete.length;t++)Object.assign(this.$refs.autocomplete[t].$data,this.$refs.autocomplete[t].$options.data());Object.assign(this.$refs.clientAutoComplete.$data,this.$refs.clientAutoComplete.$options.data()),Object.assign(this.$data,this.$options.data())},updateItems:function(t){var e=this;o.a.get("/clients?search="+t).then(function(t){var n=t.data;n.length?e.clientNotFound=!1:e.clientNotFound=!0,e.items=n})},updateProducts:function(t,e){var n=this;o.a.get("/items?search="+t).then(function(t){var i=t.data;n.$set(n.products,e,i)})},getLabel:function(t){return t.name+" "+t.surname},getLabelProduct:function(t){return t.name},addItemInvoice:function(){this.items_invoice.push({product:"",amount:0})},close:function(){this.reset(),this.$refs.dialog1.close()},deleteItem:function(t){this.items_invoice.splice(t,1)}}}},67:function(t,e,n){e=t.exports=n(11)(),e.push([t.i,"input[type=search]{border-radius:0!important}.v-autocomplete .v-autocomplete-list{width:100%;text-align:left;border:none;border-top:none;max-height:400px;overflow-y:auto;z-index:10;border-bottom:1px solid #157977}.v-autocomplete .v-autocomplete-list .v-autocomplete-list-item{cursor:pointer;background-color:#fff;padding:10px;border-bottom:1px solid #157977;border-left:1px solid #157977;border-right:1px solid #157977}.v-autocomplete .v-autocomplete-list .v-autocomplete-list-item:last-child{border-bottom:none}.v-autocomplete .v-autocomplete-list .v-autocomplete-list-item:hover{background-color:#eee}",""])},69:function(t,e,n){n(89);var i=n(46)(n(57),n(87),null,null);t.exports=i.exports},87:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("md-dialog",{ref:"dialog1",on:{close:t.reset}},[n("md-dialog-title",[t._v("Crear cotizacion")]),n("md-dialog-content",[n("nav",{staticClass:"level"},[n("div",{staticClass:"level-left"},[n("div",{staticClass:"level-item"},[n("div",{staticClass:"field has-addons"},[n("p",{staticClass:"control"},[n("v-autocomplete",{ref:"clientAutoComplete",attrs:{items:t.items,wait:100,"component-item":t.template,"input-class":t.clientNotFound?"input is-danger":"input",placeholder:"Nombre del cliente","get-label":t.getLabel},on:{"update-items":t.updateItems},model:{value:t.item,callback:function(e){t.item=e},expression:"item"}})],1),n("p",{staticClass:"control"},[n("button",{staticClass:"button",class:{"is-outlined is-danger":t.clientNotFound},on:{click:t.addItemInvoice}},[n("i",{staticClass:"fa fa-plus",attrs:{"aria-hidden":"true"}}),n("md-ink-ripple")],1)]),n("p",{staticClass:"control"},[n("a",{staticClass:"button",class:{"is-primary":!!t.item,"is-outlined is-danger":t.clientNotFound},staticStyle:{color:"#363636","text-decoration":"none"},attrs:{href:"/clientes"}},[n("i",{staticClass:"fa fa-user",attrs:{"aria-hidden":"true"}})])]),n("p",{staticClass:"control"},[n("button",{staticClass:"button",class:{"is-outlined is-danger":t.clientNotFound},on:{click:function(e){e.preventDefault(),t.isEditing=!t.isEditing}}},[n("i",{staticClass:"fa",class:t.isEditing?"fa-pencil-square":"fa-pencil-square-o",attrs:{"aria-hidden":"true"}})])])])]),n("div",{staticClass:"level-item"},[n("p",{directives:[{name:"show",rawName:"v-show",value:t.clientNotFound,expression:"clientNotFound"}],staticClass:"help is-danger"},[t._v("Cliente no encontrado")])])])]),n("md-table",[n("md-table-header",[n("md-table-row",[n("md-table-head",{directives:[{name:"show",rawName:"v-show",value:t.isEditing,expression:"isEditing"}]}),n("md-table-head",[t._v("Producto")]),n("md-table-head",[t._v("Descripci贸n")]),n("md-table-head",{staticStyle:{width:"15%"}},[t._v("Cantidad")]),n("md-table-head",[t._v("Costo unitario")]),n("md-table-head",[t._v("Total")])],1)],1),n("md-table-body",t._l(t.items_invoice,function(e,i){return n("md-table-row",{key:i},[n("md-table-cell",{directives:[{name:"show",rawName:"v-show",value:t.isEditing,expression:"isEditing"}]},[n("md-button",{staticClass:"md-icon-button",nativeOn:{click:function(e){e.preventDefault(),t.deleteItem(i)}}},[n("i",{staticClass:"fa fa-trash",attrs:{"aria-hidden":"true"}})])],1),n("md-table-cell",[n("v-autocomplete",{ref:"autocomplete",refInFor:!0,attrs:{items:t.products[i],wait:100,"component-item":t.template,"input-class":"input",placeholder:"Nombre del producto","get-label":t.getLabelProduct},on:{"update-items":function(e){t.updateProducts(e,i)}},model:{value:e.product,callback:function(t){e.product=t},expression:"it.product"}})],1),n("md-table-cell",[t._v(t._s(e.product?e.product.description:""))]),n("md-table-cell",{staticStyle:{width:"15%"}},[n("input",{directives:[{name:"model",rawName:"v-model.number",value:e.amount,expression:"it.amount",modifiers:{number:!0}}],staticClass:"input",attrs:{type:"text"},domProps:{value:e.amount},on:{input:function(n){n.target.composing||(e.amount=t._n(n.target.value))},blur:function(e){t.$forceUpdate()}}})]),n("md-table-cell",{attrs:{"md-numeric":"md-numeric"}},[e.product?n("p",[t._v(t._s(t._f("currency")(e.product.cost)))]):t._e()]),n("md-table-cell",[n("span",{directives:[{name:"show",rawName:"v-show",value:i==t.items_invoice.length-1,expression:"index == (items_invoice.length - 1)"}]},[n("p",[t._v("Subtotal: "+t._s(t._f("currency")(t.subtotal_products)))]),n("p",[t._v("IVA 19%: "+t._s(t._f("currency")(t.iva_products)))]),n("p",[t._v("Total: "+t._s(t._f("currency")(t.total_products)))])])])],1)}))],1)],1),n("md-dialog-actions",[n("md-button",{staticClass:"md-primary",nativeOn:{click:function(e){t.close()}}},[t._v("Cancelar")]),n("md-button",{staticClass:"md-primary",nativeOn:{click:function(e){t.onSubmit(e)}}},[t._v("Crear")])],1)],1)},staticRenderFns:[]}},89:function(t,e,n){var i=n(67);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);n(90)("0b2c5247",i,!0)},90:function(t,e,n){function i(t){for(var e=0;e<t.length;e++){var n=t[e],i=u[n.id];if(i){i.refs++;for(var o=0;o<i.parts.length;o++)i.parts[o](n.parts[o]);for(;o<n.parts.length;o++)i.parts.push(a(n.parts[o]));i.parts.length>n.parts.length&&(i.parts.length=n.parts.length)}else{for(var r=[],o=0;o<n.parts.length;o++)r.push(a(n.parts[o]));u[n.id]={id:n.id,refs:1,parts:r}}}}function o(){var t=document.createElement("style");return t.type="text/css",d.appendChild(t),t}function a(t){var e,n,i=document.querySelector('style[data-vue-ssr-id~="'+t.id+'"]');if(i){if(f)return v;i.parentNode.removeChild(i)}if(h){var a=m++;i=p||(p=o()),e=r.bind(null,i,a,!1),n=r.bind(null,i,a,!0)}else i=o(),e=s.bind(null,i),n=function(){i.parentNode.removeChild(i)};return e(t),function(i){if(i){if(i.css===t.css&&i.media===t.media&&i.sourceMap===t.sourceMap)return;e(t=i)}else n()}}function r(t,e,n,i){var o=n?"":i.css;if(t.styleSheet)t.styleSheet.cssText=b(e,o);else{var a=document.createTextNode(o),r=t.childNodes;r[e]&&t.removeChild(r[e]),r.length?t.insertBefore(a,r[e]):t.appendChild(a)}}function s(t,e){var n=e.css,i=e.media,o=e.sourceMap;if(i&&t.setAttribute("media",i),o&&(n+="\n/*# sourceURL="+o.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */"),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}var c="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!c)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var l=n(91),u={},d=c&&(document.head||document.getElementsByTagName("head")[0]),p=null,m=0,f=!1,v=function(){},h="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());t.exports=function(t,e,n){f=n;var o=l(t,e);return i(o),function(e){for(var n=[],a=0;a<o.length;a++){var r=o[a],s=u[r.id];s.refs--,n.push(s)}e?(o=l(t,e),i(o)):o=[];for(var a=0;a<n.length;a++){var s=n[a];if(0===s.refs){for(var c=0;c<s.parts.length;c++)s.parts[c]();delete u[s.id]}}}};var b=function(){var t=[];return function(e,n){return t[e]=n,t.filter(Boolean).join("\n")}}()},91:function(t,e){t.exports=function(t,e){for(var n=[],i={},o=0;o<e.length;o++){var a=e[o],r=a[0],s=a[1],c=a[2],l=a[3],u={id:t+":"+o,css:s,media:c,sourceMap:l};i[r]?i[r].parts.push(u):n.push(i[r]={id:r,parts:[u]})}return n}}});