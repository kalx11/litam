webpackJsonp([5],{48:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{item:{required:!0}}}},49:function(t,e,i){var a=i(44)(i(48),i(50),null,null);t.exports=a.exports},50:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("span",[t._v(t._s(t.item.name))]),t._v(" "),i("abbr",[t._v(t._s(t.item.surname))])])},staticRenderFns:[]}},58:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i(10),n=i.n(a),s=i(49),o=i.n(s),r=i(46),c=i.n(r),l=function(){function t(t,e){var i=[],a=!0,n=!1,s=void 0;try{for(var o,r=t[Symbol.iterator]();!(a=(o=r.next()).done)&&(i.push(o.value),!e||i.length!==e);a=!0);}catch(t){n=!0,s=t}finally{try{!a&&r.return&&r.return()}finally{if(n)throw s}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();e.default={data:function(){return{isEditing:!1,template:o.a,client:"",total_cost:0,subtotal:0,iva:0,clients:[],products:[],items_invoice:[],quote:{id:""}}},filters:{currency:function(t){if(t)return c.a.formatMoney(t,{symbol:"$",format:"%v %s"})}},computed:{subtotal_products:function(){var t=[];return Object.entries(this.items_invoice).forEach(function(e){var i=l(e,2),a=(i[0],i[1]);a.product&&t.push(Number(a.product.cost)*a.amount)}),this.subtotal=t.reduce(function(t,e){return t+e},0),this.subtotal},iva_products:function(){return this.iva=.19*this.subtotal,this.iva},total_products:function(){return this.total_cost=this.subtotal+this.iva,this.total_cost}},methods:{open:function(t){this.$refs.dialog.open(),this.getQuote(t)},onSubmit:function(){var t=this,e={client:this.client.id,items_invoice:this.items_invoice,total_cost:this.total_cost};n.a.put("/quotes/"+this.quote.id,e).then(function(){t.close(),t.$emit("done")})},reset:function(){for(var t=0;t<this.$refs.autocomplete.length;t++)Object.assign(this.$refs.autocomplete[t].$data,this.$refs.autocomplete[t].$options.data());Object.assign(this.$refs.clientAutoComplete.$data,this.$refs.clientAutoComplete.$options.data()),Object.assign(this.$data,this.$options.data())},updateItems:function(t){var e=this;n.a.get("/clients?search="+t).then(function(t){var i=t.data;e.clients=i})},updateProducts:function(t,e){var i=this;n.a.get("/items?search="+t).then(function(t){var a=t.data;i.$set(i.products,e,a)})},deleteItem:function(t){this.items_invoice.splice(t,1)},getLabel:function(t){return t.name+" "+t.surname},getLabelProduct:function(t){return t.name},addItemInvoice:function(){this.items_invoice.push({product:"",amount:0})},getQuote:function(t){var e=this;this.quote.id=t,n.a.get("/quotes/"+t).then(function(t){var i=t.data;e.client=i.client;for(var a=0;a<i.items.length;a++){var n=i.items[a];e.items_invoice.push({product:n,amount:n.pivot.amount})}})},close:function(){this.$refs.dialog.close(),this.reset()}}}},70:function(t,e,i){var a=i(44)(i(58),i(79),null,null);t.exports=a.exports},79:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("md-dialog",{ref:"dialog",on:{close:t.reset}},[i("md-dialog-title",[t._v("Editar cotización")]),i("md-dialog-content",[i("nav",{staticClass:"level"},[i("div",{staticClass:"level-left"},[i("div",{staticClass:"level-item"},[i("div",{staticClass:"field has-addons"},[i("p",{staticClass:"control"},[i("v-autocomplete",{ref:"clientAutoComplete",attrs:{items:t.clients,wait:100,"component-item":t.template,"input-class":"input",placeholder:"Nombre del cliente","get-label":t.getLabel},on:{"update-items":t.updateItems},model:{value:t.client,callback:function(e){t.client=e},expression:"client"}})],1),i("p",{staticClass:"control"},[i("button",{staticClass:"button",on:{click:t.addItemInvoice}},[i("i",{staticClass:"fa fa-plus",attrs:{"aria-hidden":"true"}}),i("md-ink-ripple")],1)]),i("p",{staticClass:"control"},[i("a",{staticClass:"button",class:{"is-primary":!!t.client},staticStyle:{color:"#363636","text-decoration":"cdnone"},attrs:{href:"/clientes"}},[i("i",{staticClass:"fa fa-user",attrs:{"aria-hidden":"true"}})])]),i("p",{staticClass:"control"},[i("button",{staticClass:"button",on:{click:function(e){e.preventDefault(),t.isEditing=!t.isEditing}}},[i("i",{staticClass:"fa",class:t.isEditing?"fa-pencil-square":"fa-pencil-square-o",attrs:{"aria-hidden":"true"}})])])])])])]),i("md-table",[i("md-table-header",[i("md-table-row",[i("md-table-head",{directives:[{name:"show",rawName:"v-show",value:t.isEditing,expression:"isEditing"}]}),i("md-table-head",[t._v("Producto")]),i("md-table-head",[t._v("Descripción")]),i("md-table-head",{staticStyle:{width:"15%"}},[t._v("Cantidad")]),i("md-table-head",[t._v("Costo unitario")]),i("md-table-head",[t._v("Total")])],1)],1),i("md-table-body",t._l(t.items_invoice,function(e,a){return i("md-table-row",{key:a},[i("md-table-cell",{directives:[{name:"show",rawName:"v-show",value:t.isEditing,expression:"isEditing"}]},[i("md-button",{staticClass:"md-icon-button",nativeOn:{click:function(e){e.preventDefault(),t.deleteItem(a)}}},[i("i",{staticClass:"fa fa-trash",attrs:{"aria-hidden":"true"}})])],1),i("md-table-cell",[i("v-autocomplete",{ref:"autocomplete",refInFor:!0,attrs:{items:t.products[a],wait:100,"component-item":t.template,"input-class":"input",placeholder:"Nombre del producto","get-label":t.getLabelProduct},on:{"update-items":function(e){t.updateProducts(e,a)}},model:{value:e.product,callback:function(t){e.product=t},expression:"it.product"}})],1),i("md-table-cell",[t._v(t._s(e.product?e.product.description:""))]),i("md-table-cell",{staticStyle:{width:"15%"}},[i("input",{directives:[{name:"model",rawName:"v-model.number",value:e.amount,expression:"it.amount",modifiers:{number:!0}}],staticClass:"input",attrs:{type:"text"},domProps:{value:e.amount},on:{input:function(i){i.target.composing||(e.amount=t._n(i.target.value))},blur:function(e){t.$forceUpdate()}}})]),i("md-table-cell",{attrs:{"md-numeric":"md-numeric"}},[e.product?i("p",[t._v(t._s(t._f("currency")(e.product.cost)))]):t._e()]),i("md-table-cell",[i("span",{directives:[{name:"show",rawName:"v-show",value:a==t.items_invoice.length-1,expression:"index == (items_invoice.length - 1)"}]},[i("p",[t._v("Subtotal: "+t._s(t._f("currency")(t.subtotal_products)))]),i("p",[t._v("IVA 19%: "+t._s(t._f("currency")(t.iva_products)))]),i("p",[t._v("Total: "+t._s(t._f("currency")(t.total_products)))])])])],1)}))],1)],1),i("md-dialog-actions",[i("md-button",{staticClass:"md-primary",nativeOn:{click:function(e){t.close(e)}}},[t._v("Cancelar")]),i("md-button",{staticClass:"md-primary",nativeOn:{click:function(e){t.onSubmit(e)}}},[t._v("Editar")])],1)],1)},staticRenderFns:[]}}});