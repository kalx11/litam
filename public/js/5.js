webpackJsonp([5],{48:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{item:{required:!0}}}},49:function(t,e,i){var n=i(44)(i(48),i(50),null,null);t.exports=n.exports},50:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("span",[t._v(t._s(t.item.name))]),t._v(" "),i("abbr",[t._v(t._s(t.item.surname))])])},staticRenderFns:[]}},58:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(10),a=i.n(n),s=i(49),o=i.n(s),r=i(46),c=i.n(r),l=function(){function t(t,e){var i=[],n=!0,a=!1,s=void 0;try{for(var o,r=t[Symbol.iterator]();!(n=(o=r.next()).done)&&(i.push(o.value),!e||i.length!==e);n=!0);}catch(t){a=!0,s=t}finally{try{!n&&r.return&&r.return()}finally{if(a)throw s}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();e.default={data:function(){return{isEditing:!1,template:o.a,client:"",total_cost:0,clients:[],products:[],items_invoice:[],quote:{id:""}}},methods:{open:function(t){this.$refs.dialog.open(),this.getQuote(t)},currency:function(t){if(t)return c.a.formatMoney(t,{symbol:"$",format:"%v %s"})},onSubmit:function(){var t=this,e={client:this.client.id,items_invoice:this.items_invoice,total_cost:this.total_cost};a.a.put("/quotes/"+this.quote.id,e).then(function(){t.close(),t.$emit("done")})},reset:function(){for(var t=0;t<this.$refs.autocomplete.length;t++)Object.assign(this.$refs.autocomplete[t].$data,this.$refs.autocomplete[t].$options.data());Object.assign(this.$refs.clientAutoComplete.$data,this.$refs.clientAutoComplete.$options.data()),Object.assign(this.$data,this.$options.data())},updateItems:function(t){var e=this;a.a.get("/clients?search="+t).then(function(t){var i=t.data;e.clients=i})},updateProducts:function(t,e){var i=this;a.a.get("/items?search="+t).then(function(t){var n=t.data;i.$set(i.products,e,n)})},deleteItem:function(t){this.items_invoice.splice(t,1)},getLabel:function(t){return t.name+" "+t.surname},getLabelProduct:function(t){return t.name},addItemInvoice:function(){this.items_invoice.push({product:"",amount:0})},total:function(){var t=[];Object.entries(this.items_invoice).forEach(function(e){var i=l(e,2),n=(i[0],i[1]);n.product&&t.push(Number(n.product.cost)*n.amount)});var e=t.reduce(function(t,e){return t+e},0);return this.total_cost=e,e},getQuote:function(t){var e=this;this.quote.id=t,a.a.get("/quotes/"+t).then(function(t){var i=t.data;e.client=i.client;for(var n=0;n<i.items.length;n++){var a=i.items[n];e.items_invoice.push({product:a,amount:a.pivot.amount})}})},close:function(){this.$refs.dialog.close(),this.reset()}}}},70:function(t,e,i){var n=i(44)(i(58),i(79),null,null);t.exports=n.exports},79:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("md-dialog",{ref:"dialog",on:{close:t.reset}},[i("md-dialog-title",[t._v("Editar cotización")]),i("md-dialog-content",[i("nav",{staticClass:"level"},[i("div",{staticClass:"level-left"},[i("div",{staticClass:"level-item"},[i("div",{staticClass:"field has-addons"},[i("p",{staticClass:"control"},[i("v-autocomplete",{ref:"clientAutoComplete",attrs:{items:t.clients,wait:100,"component-item":t.template,"input-class":"input",placeholder:"Nombre del cliente","get-label":t.getLabel},on:{"update-items":t.updateItems},model:{value:t.client,callback:function(e){t.client=e},expression:"client"}})],1),i("p",{staticClass:"control"},[i("button",{staticClass:"button",on:{click:t.addItemInvoice}},[i("i",{staticClass:"fa fa-plus",attrs:{"aria-hidden":"true"}}),i("md-ink-ripple")],1)]),i("p",{staticClass:"control"},[i("a",{staticClass:"button",class:{"is-primary":!!t.client},staticStyle:{color:"#363636","text-decoration":"cdnone"},attrs:{href:"/clientes"}},[i("i",{staticClass:"fa fa-user",attrs:{"aria-hidden":"true"}})])]),i("p",{staticClass:"control"},[i("button",{staticClass:"button",on:{click:function(e){e.preventDefault(),t.isEditing=!t.isEditing}}},[i("i",{staticClass:"fa",class:t.isEditing?"fa-pencil-square":"fa-pencil-square-o",attrs:{"aria-hidden":"true"}})])])])])])]),i("md-table",[i("md-table-header",[i("md-table-row",[i("md-table-head",{directives:[{name:"show",rawName:"v-show",value:t.isEditing,expression:"isEditing"}]}),i("md-table-head",[t._v("Producto")]),i("md-table-head",[t._v("Descripción")]),i("md-table-head",{staticStyle:{width:"15%"}},[t._v("Cantidad")]),i("md-table-head",[t._v("Costo unitario")]),i("md-table-head",[t._v("Total")])],1)],1),i("md-table-body",t._l(t.items_invoice,function(e,n){return i("md-table-row",{key:n},[i("md-table-cell",{directives:[{name:"show",rawName:"v-show",value:t.isEditing,expression:"isEditing"}]},[i("md-button",{staticClass:"md-icon-button",nativeOn:{click:function(e){e.preventDefault(),t.deleteItem(n)}}},[i("i",{staticClass:"fa fa-trash",attrs:{"aria-hidden":"true"}})])],1),i("md-table-cell",[i("v-autocomplete",{ref:"autocomplete",refInFor:!0,attrs:{items:t.products[n],wait:100,"component-item":t.template,"input-class":"input",placeholder:"Nombre del producto","get-label":t.getLabelProduct},on:{"update-items":function(e){t.updateProducts(e,n)}},model:{value:e.product,callback:function(t){e.product=t},expression:"it.product"}})],1),i("md-table-cell",[t._v(t._s(e.product?e.product.description:""))]),i("md-table-cell",{staticStyle:{width:"15%"}},[i("input",{directives:[{name:"model",rawName:"v-model.number",value:e.amount,expression:"it.amount",modifiers:{number:!0}}],staticClass:"input",attrs:{type:"text"},domProps:{value:e.amount},on:{input:function(i){i.target.composing||(e.amount=t._n(i.target.value))},blur:function(e){t.$forceUpdate()}}})]),i("md-table-cell",{attrs:{"md-numeric":"md-numeric"}},[t._v(t._s(e.product?t.currency(e.product.cost):""))]),i("md-table-cell",[t._v(t._s(n==t.items_invoice.length-1?t.currency(t.total()):""))])],1)}))],1)],1),i("md-dialog-actions",[i("md-button",{staticClass:"md-primary",nativeOn:{click:function(e){t.close(e)}}},[t._v("Cancelar")]),i("md-button",{staticClass:"md-primary",nativeOn:{click:function(e){t.onSubmit(e)}}},[t._v("Editar")])],1)],1)},staticRenderFns:[]}}});